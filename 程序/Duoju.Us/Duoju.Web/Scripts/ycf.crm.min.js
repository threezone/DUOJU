window.ycf_crm=window.ycf_crm||{};
ycf_crm.loadGrid=function(objTable,opts,fnCellClickCallBack,fnOnDbClickRow,evelEvent){var _opts={title:opts.title||"",fitColumns:opts.fitColumns||false,fit:opts.fit||false,nowrap:opts.nowrap||false,striped:opts.striped||false,url:opts.url||"",queryParams:opts.queryParams||"",loadMsg:opts.loadMsg||"Loading...",sortName:opts.sortName||"ID",sortOrder:opts.sortOrder||"asc",remoteSort:opts.remoteSort||false,height:500,idField:opts.idField||"ID",columns:opts.columns||null,toolbar:opts.toolbar||null,pagination:opts.pagination||false,pageNumber:opts.pageNumber||1,pageSize:opts.pageSize||20,pageList:opts.pageList||[5,10,15,20,25,50],singleSelect:opts.singleSelect||false,rownumbers:opts.rownumbers||false,remoteSort:true,onBeforeEdit:function(index,row){row.editing=true;
objTable.datagrid("refreshRow",index)
},onAfterEdit:function(index,row){row.editing=false;
objTable.datagrid("refreshRow",index)
},onCancelEdit:function(index,row){row.editing=false;
objTable.datagrid("refreshRow",index)
},onSelect:function(rowIndex,rowData){$($(this).parents().find(".datagrid-body input:checkbox")[rowIndex]).closest(".checker > span").addClass("checked")
},onUnselect:function(rowIndex,rowData){$($(this).parents().find(".datagrid-body input:checkbox")[rowIndex]).closest(".checker > span").removeClass("checked")
},onLoadSuccess:function(data){$("input[type=checkbox],input[type=radio],input[type=file]").uniform();
$(".datagrid-header-check input:checkbox").click(function(){var checkedStatus=this.checked;
var checkbox=$(this).parents().find(".datagrid-body input:checkbox");
checkbox.each(function(){this.checked=checkedStatus;
if(checkedStatus==this.checked){$(this).closest(".checker > span").removeClass("checked")
}if(this.checked){$(this).closest(".checker > span").addClass("checked")
}})
});
if(evelEvent){var fnStr=ycf_crm.getEvel(evelEvent);
eval(fnStr)
}}};
if(typeof fnCellClickCallBack==="function"){_opts.onClickCell=fnCellClickCallBack
}if(typeof fnOnDbClickRow==="function"){_opts.onDblClickRow=fnOnDbClickRow
}objTable.datagrid(_opts)
};
ycf_crm.logout=function(d,f,e){$.ajax({url:"/Account/Logout",type:"POST",dataType:"json",cache:false,beforeSend:function(a,b){if(d){d.call(d,a,b)
}},success:function(a){f.call(f,a)
},error:function(a){e.call(e,a)
}})
};
ycf_crm.getMenu=function(d,f,e){$.ajax({url:"/Home/GetMenu",type:"POST",dataType:"json",cache:true,beforeSend:function(a,b){if(d){d.call(d,a,b)
}},success:function(a){f.call(f,a)
},error:function(a){e.call(e,a)
}})
};
ycf_crm.getActionByGidAndUid=function(i,j,f,h,g){$.ajax({url:"/Home/GetActionByGidAndUid",type:"POST",dataType:"json",cache:true,data:{gid:i,uid:j},beforeSend:function(a,b){if(f){f.call(f,a,b)
}},success:function(a){h.call(h,a)
},error:function(a){g.call(g,a)
}})
};
ycf_crm.getAllAction=function(d,f,e){$.ajax({async:false,url:"/Home/GetAllAction",type:"POST",dataType:"json",cache:true,beforeSend:function(a,b){if(d){d.call(d,a,b)
}},success:function(a){f.call(f,a)
},error:function(a){e.call(e,a)
}})
};
ycf_crm.deleteSupplierInfo=function(h,e,g,f){$.ajax({url:"/Supplier/DeleteSupplierInfo",type:"POST",data:{sid:h},dataType:"json",cache:false,beforeSend:function(a,b){if(e){e.call(e,a,b)
}},success:function(a){g.call(g,a)
},error:function(a){f.call(f,a)
}})
};
ycf_crm.deleteSupplierList=function(h,e,g,f){$.ajax({url:"/Supplier/DeleteSupplierInfo",type:"POST",data:{sidList:h},dataType:"json",cache:false,beforeSend:function(a,b){if(e){e.call(e,a,b)
}},success:function(a){g.call(g,a)
},error:function(a){f.call(f,a)
}})
};
ycf_crm.getTaskList=function(d,f,e){$.ajax({url:"/Task/GetTaskByUserId",type:"POST",dataType:"json",cache:true,beforeSend:function(a,b){if(d){d.call(d,a,b)
}},success:function(a){f.call(f,a)
},error:function(a){e.call(e,a)
}})
};
ycf_crm.readTask=function(j,i,f,h,g){$.ajax({url:"/Task/ReadTask",type:"POST",dataType:"json",data:{tid:j,sid:i},cache:false,beforeSend:function(a,b){if(f){f.call(f,a,b)
}},success:function(a){h.call(h,a)
},error:function(a){g.call(g,a)
}})
};
ycf_crm.getSupplierInWeek=function(d,f,e){$.ajax({url:"/Supplier/GetSupplierInWeek",type:"POST",dataType:"json",cache:true,beforeSend:function(a,b){if(d){d.call(d,a,b)
}},success:function(a){f.call(f,a)
},error:function(a){e.call(e,a)
}})
};
ycf_crm.getCurrentUser=function(d,f,e){$.ajax({url:"/Account/GetCurrentUser",type:"POST",dataType:"json",cache:true,beforeSend:function(a,b){if(d){d.call(d,a,b)
}},success:function(a){f.call(f,a)
},error:function(a){e.call(e,a)
}})
};
ycf_crm.followSupplier=function(h,e,g,f){$.ajax({url:"/Supplier/FollowSupplier",type:"POST",dataType:"json",cache:false,data:{sid:h},beforeSend:function(a,b){if(e){e.call(e,a,b)
}},success:function(a){g.call(g,a)
},error:function(a){f.call(f,a)
}})
};
ycf_crm.releaseSupplier=function(h,e,g,f){$.ajax({url:"/Supplier/ReleaseSupplier",type:"POST",dataType:"json",cache:false,data:{sid:h},beforeSend:function(a,b){if(e){e.call(e,a,b)
}},success:function(a){g.call(g,a)
},error:function(a){f.call(f,a)
}})
};
ycf_crm.getSupplierByName=function(h,e,g,f){$.ajax({url:"/Supplier/CheckSupplierByName",type:"POST",dataType:"json",cache:false,data:{name:h},beforeSend:function(a,b){if(e){e.call(e,a,b)
}},success:function(a){g.call(g,a)
},error:function(a){f.call(f,a)
}})
};
ycf_crm.getFollowState=function(d,f,e){$.ajax({url:"/FollowLog/GetFollowState",type:"POST",dataType:"json",cache:false,beforeSend:function(a,b){if(d){d.call(d,a,b)
}},success:function(a){f.call(f,a)
},error:function(a){e.call(e,a)
}})
};
ycf_crm.getArea=function(d,f,e){$.ajax({url:"/Position/GeAllAreas",type:"POST",dataType:"json",cache:true,beforeSend:function(a,b){if(d){d.call(d,a,b)
}},success:function(a){f.call(f,a)
},error:function(a){e.call(e,a)
}})
};
ycf_crm.getProvinceByAreaId=function(e,f,h,g){$.ajax({url:"/Position/GetProvinceByAreaId",type:"POST",dataType:"json",cache:true,data:{areaId:e},beforeSend:function(a,b){if(f){f.call(f,a,b)
}},success:function(a){h.call(h,a)
},error:function(a){g.call(g,a)
}})
};
ycf_crm.getProvince=function(d,f,e){$.ajax({url:"/Position/GetAllProvince",type:"POST",dataType:"json",cache:true,beforeSend:function(a,b){if(d){d.call(d,a,b)
}},success:function(a){f.call(f,a)
},error:function(a){e.call(e,a)
}})
};
ycf_crm.getCityByProvinceCode=function(e,f,h,g){$.ajax({url:"/Position/GetCityByProvinceCode",type:"POST",dataType:"json",cache:true,data:{code:e},beforeSend:function(a,b){if(f){f.call(f,a,b)
}},success:function(a){h.call(h,a)
},error:function(a){g.call(g,a)
}})
};
ycf_crm.getDistrictByCityCode=function(e,f,h,g){$.ajax({url:"/Position/GetDistrictByCityCode",type:"POST",dataType:"json",cache:true,data:{code:e},beforeSend:function(a,b){if(f){f.call(f,a,b)
}},success:function(a){h.call(h,a)
},error:function(a){g.call(g,a)
}})
};
ycf_crm.getScenicsMappingByResortId=function(f,e,d){$.ajax({url:"/Position/GetScenicsMappingByResortId",type:"POST",dataType:"json",cache:true,data:{resortId:f},success:function(a){e.call(e,a)
},error:function(a){d.call(d,a)
}})
};
ycf_crm.getThemesMappingByResortId=function(f,e,d){$.ajax({url:"/Position/GetThemesMappingByResortId",type:"POST",dataType:"json",cache:true,data:{resortId:f},success:function(a){e.call(e,a)
},error:function(a){d.call(d,a)
}})
};
ycf_crm.getScenicsByCityCode=function(d,f,e){$.ajax({url:"/Position/GetScenicsByCityCode",type:"POST",dataType:"json",cache:true,data:{code:d},success:function(a){f.call(f,a)
},error:function(a){e.call(e,a)
}})
};
ycf_crm.getThemeByCityCode=function(d,f,e){$.ajax({url:"/Position/GetThemeByCityCode",type:"POST",dataType:"json",cache:true,data:{code:d},success:function(a){f.call(f,a)
},error:function(a){e.call(e,a)
}})
};
ycf_crm.getSimpleUserInfoListByGroupId=function(d,f,e){$.ajax({url:"/Account/GetSimpleUserInfoListByGroupId",type:"POST",dataType:"json",cache:true,beforeSend:function(a,b){if(d){d.call(d,a,b)
}},success:function(a){f.call(f,a)
},error:function(a){e.call(e,a)
}})
};
ycf_crm.getImageListByResortId=function(f,e,d){$.ajax({url:"/Image/GetImageListByResortId",type:"POST",dataType:"json",cache:true,data:{resortId:f},success:function(a){e.call(e,a)
},error:function(a){d.call(d,a)
}})
};
ycf_crm.postImageSort=function(j,h,i,g,f){$.ajax({url:"/Image/PostImageSort",type:"POST",dataType:"json",cache:true,data:{resortId:j,imageCategoryId:h,imgIdListStr:i},success:function(a){g.call(g,a)
},error:function(a){f.call(f,a)
}})
};
ycf_crm.updateImageTitle=function(g,h,f,e){$.ajax({url:"/Image/UpdateImageTitle",type:"POST",dataType:"json",cache:true,data:{imgId:g,title:h},success:function(a){f.call(f,a)
},error:function(a){e.call(e,a)
}})
};
ycf_crm.updateResortInfoContent=function(j,f,g,i,h){$.ajax({url:"/Resort/UpdateResortContent",type:"POST",dataType:"json",cache:true,data:{resortId:j,content:f,contentType:g},success:function(a){i.call(i,a)
},error:function(a){h.call(h,a)
}})
};
ycf_crm.updateResortTitleInfo=function(m,l,n,h,i,k,j){$.ajax({url:"/Resort/UpdateResortTitleInfo",type:"POST",dataType:"json",cache:true,data:{resortId:m,mainTitle:l,subTitle:n,appMainTitle:h,appSubTitle:i},success:function(a){k.call(k,a)
},error:function(a){j.call(j,a)
}})
};
ycf_crm.deleteImage=function(f,e,d){$.ajax({url:"/Image/DeleteImage",type:"POST",dataType:"json",cache:true,data:{imgId:f},success:function(a){e.call(e,a)
},error:function(a){d.call(d,a)
}})
};
ycf_crm.stringFormat=function(){var f=arguments[0];
for(var d=0;
d<arguments.length-1;
d++){var e=new RegExp("\\{"+d+"\\}","gm");
f=f.replace(e,arguments[d+1])
}return f
};
ycf_crm.getEvel=function(f){var e=f.toString();
var d=e.substring(e.indexOf("{")+1,e.lastIndexOf("}"));
return d
};
ycf_crm.errorHandler=function(b){if(!isNaN(b)){document.location.href="/error?errorCode="+b
}else{document.location.href="/error"
}};